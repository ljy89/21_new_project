<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ScoreDAO">

	<!-- 성적등록 -->
	<update id="updateScore" parameterType="String">
		UPDATE register SET score=#{score} WHERE id={sid}
	</update>
	
	<!--내 성적 조회 -->
	<select id="getScoreList" resultType="score" parameterType="String">
		SELECT s.name sname, d.name dname, sub.name subname, r.score, r.completeyn
		FROM student s, department d, subject sub, register r
		WHERE s.id=#{sid} 
		  AND completeyn ='y'
		  AND s.dseq = d.dseq
		  AND s.id = r.id
		  AND r.sseq = sub.sseq
	</select>

	<!-- 과목 수강생 조회 -->
	<select id="completeStudentList" resultType="score">
		SELECT s.name sname	
		FROM student s, register r, subject sub
		
		WHERE sub.name =#{subname}
		  AND s.id = r.id
		  AND sub.sseq = r.sseq
	</select>
	
	<!-- 교수 개설 과목 조회 -->
	
	<select id="subjectListByProfessor" parameterType="String" resultType="score">
		SELECT sseq, name subname
		FROM subject 
		WHERE id = #{pid}
		
	</select>
</mapper>















